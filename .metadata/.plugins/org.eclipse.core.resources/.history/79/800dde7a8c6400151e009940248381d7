package br.com.tecnonoticias.ser;

import java.awt.Component;
import java.awt.Container;
import java.io.File;
import java.util.jar.JarException;
import javazoom.jl.decoder.JavaLayerException;
import javax.sound.midi.MidiSystem;
import javax.sound.midi.Sequence;
import javax.sound.midi.Sequencer;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JProgressBar;
import br.com.tecnonoticias.player.*;

@SuppressWarnings("serial")
public class Cenario extends JFrame {

	static boolean parar = true;

	static JProgressBar bar = new JProgressBar();
	static JProgressBar bar1 = new JProgressBar();
	static JProgressBar bar2 = new JProgressBar();

	Container parede = getContentPane();
	static Ser serA = new Ser("");
	static JLabel labelSerA;
	static JLabel BarraSerA;

	static Ser serB = new Ser("");
	static JLabel labelSerB;
	static JLabel BarraSerB;

	static Ser serC = new Ser("");
	static JLabel labelSerC;
	static JLabel BarraSerC;

	static Ser serD = new Ser("");
	static JLabel labelSerD;

	static Ser planeta = new Ser("");
	static JLabel Mundo;

	static Ser arvore = new Ser("");
	static JLabel labelArvore;

	Icon goku = new ImageIcon(("/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/GokuBd.png"));
	Icon bart = new ImageIcon(("/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/kuririn.png"));
	Icon bobsponja = new ImageIcon(("/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/cachorro.gif"));
	Icon monstro = new ImageIcon(("/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/morcego.gif"));
	Icon mundo = new ImageIcon(("/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/Espaco003.jpg"));
	Icon icomArvore = new ImageIcon("/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/arvore.png");
	// ImageIcon icomArvore = new
	// ImageIcon(getClass().getResource("/imagens/arvore.png"));

	static Sequencer player; // ESSE É O NOSSO TOCADOR
	static String musica1 = "/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/batalha.mid"; // ISSO
																							// É
																							// SÓ
																							// A
																							// URL
																							// DA
																							// NOSSA
																							// MÚSICA
	static String musica2 = "/media/edgar/VICTOR/WorkspaceNew/Swing/imagens/campo.mid"; // ISSO
																						// AQUI
																						// TAMBÉM
																						// É
																						// OUTRA
																						// URL

	public static void tocarMusica(String nome, int repetir) {
		try {
			player = MidiSystem.getSequencer(); // INICIA O TOCADOR
			Sequence musica = MidiSystem.getSequence(new File(nome));// CARREGA
																		// A
																		// MÚSICA
																		// A SER
																		// TOCADA
			player.open(); // ABRE O TOCADOR
			player.setSequence(musica); // PASSA A MÚSICA QUE VAI SER TOCADA
										// PARA O TOCADOR
			player.setLoopCount(repetir); // DEFINE QUANTAS VEZES VAI TOCAR A
											// MÚSICA OBS: 0 = 1 vez; 1 = 2
											// vezes; 2 = 3 vezes...
			player.start(); // COMEÇA A TOCAR.... CASO QUEIRA PARAR DE TOCAR A
							// MÚSICA BASTA: player.stop();
		} catch (Exception e) {
			System.out.println("Erro ao tocar: " + nome);
		}
	}

	public Cenario() throws InterruptedException {
		super("Mundo");
		setDefaultCloseOperation(EXIT_ON_CLOSE);
		parede = getContentPane();
		parede.setLayout(null);
		setSize(800, 600);
		setLocation(800, 600);
		setLocationRelativeTo(null);

		labelSerA = new JLabel(goku);
		parede.add(labelSerA);
		labelSerA.setSize(90, 100);
		parede.add(bar);
		bar.setSize(100, 10);
		bar.setLocation(10, 10);
		BarraSerA = new JLabel("Vida Ser A");
		BarraSerA.setLocation(20, 20);
		BarraSerA.setSize(100, 10);
		parede.add(BarraSerA);

		labelSerB = new JLabel(bart);
		parede.add(labelSerB);
		labelSerB.setSize(65, 65);
		parede.add(bar1);
		bar1.setSize(100, 10);
		bar1.setLocation(110, 10);
		BarraSerB = new JLabel("Vida Ser B");
		BarraSerB.setLocation(120, 20);
		BarraSerB.setSize(100, 10);
		parede.add(BarraSerB);

		labelSerC = new JLabel(bobsponja);
		parede.add(labelSerC);
		labelSerC.setSize(65, 65);
		parede.add(bar2);
		bar2.setSize(100, 10);
		bar2.setLocation(210, 10);
		BarraSerC = new JLabel("Vida Ser C");
		BarraSerC.setLocation(220, 20);
		BarraSerC.setSize(100, 10);
		parede.add(BarraSerC);

		labelSerD = new JLabel(monstro);
		parede.add(labelSerD);
		labelSerD.setSize(60, 60);

		labelArvore = new JLabel(icomArvore);
		parede.add(labelArvore);
		labelArvore.setSize(80, 70);

		Mundo = new JLabel(mundo);
		parede.add(Mundo);
		Mundo.setSize(800, 600);

	}

	public static boolean gameOver(int a, int b, int c) {
		boolean pare = true;
		if (a < 0 && b < 0 && c < 0) {
			pare = false;
		}
		return pare;
	}

	@SuppressWarnings("deprecation")
	public static void main(String[] args) throws InterruptedException, JarException, JavaLayerException {
		Cenario teste = new Cenario();
		teste.show(true);

		// Tocador.tocar();

		// ===========================================================================
		// ========== É AQUI QUE EU TO CHAMANDO O MÉTODO
		// tocarMusica()================
		tocarMusica(musica1, 999); // CHAMAMOS O TOCADOR DENTRO DO MÉTODO
									// inicializar()
		// ENTÃO AO INICAR O GAME, ESSA SERÁ A NOSSA MÚSICA DE FUNDO
		// ===========================================================================

		labelSerA.setLocation(serA.randomAparecer(serA.linha), serA.randomAparecer(serA.coluna));
		serA.x = serA.randomAparecer(300);
		labelSerB.setLocation(serB.randomAparecer(serB.linha), serB.randomAparecer(serB.coluna));
		serB.x = serB.randomAparecer(600);
		labelSerC.setLocation(serC.linha, serC.coluna);
		serC.x = serC.randomAparecer(400);
		labelArvore.setBounds(300, 350, 80, 70);

		while (gameOver(serA.vida, serB.vida, serC.vida)) {

			if (serA.random(600) % 100 == 0) {
				labelSerA.setBounds(serA.moverX(serA.x, 10, 800), serA.y, 60, 85);
			} else if (serA.random(600) % 50 == 0) {
				labelSerA.setBounds(serA.x++, serA.moverY(serA.y, 10, 600), 60, 85);
			}

			if (serA.bateu(labelSerA, labelSerD)) {
				serA.morrer(1, serA.vida);
				bar.setValue(serA.vida);
				String vida = Integer.toString(serA.vida);
				labelSerA.setText(vida);
				if (serA.vida <= 0) {
					labelSerA.setVisible(false);
				}
			}
			if (serA.bateu(labelSerA, labelArvore)) {
				serA.viver(1, serA.vida);
				bar.setValue(serA.vida);
				System.out.println("Aumenta a viada ser A "+serA.vida);
			}

			if (serB.random(600) % 100 == 0) {
				labelSerB.setBounds(serB.moverX(serB.x, 10, 600), serB.y, 60, 85);
			} else if (serB.random(600) % 100 == 0) {
				labelSerB.setBounds(serB.x++, (serB.moverY(serB.y, 10, 600)), 60, 85);
			}
			if (serB.bateu(labelSerB, labelSerD)) {
				serB.morrer(1, serB.vida);
				bar1.setValue(serB.vida);
				String vida = Integer.toString(serB.vida);
				labelSerB.setText(vida);
				if (serB.vida <= 0) {
					labelSerB.setVisible(false);
				}
			}
			if (serB.bateu(labelSerB, labelArvore)) {
				serB.viver(1, serB.vida);
				bar.setValue(serB.vida);
				System.out.println(serB.vida);
			}

			if (serC.random(600) % 100 == 0) {
				labelSerC.setBounds(serC.moverX(serC.x, 10, 600), serC.y, 50, 50);
			} else if (serC.random(600) % 50 == 0) {
				labelSerC.setBounds(serC.x++, (serC.moverY(serC.y, 10, 600)), 50, 50);
			}
			if (serC.bateu(labelSerC, labelSerD)) {
				serC.morrer(2, serC.vida);
				bar2.setValue(serC.vida);
				String vida = Integer.toString(serC.vida);
				labelSerC.setText(vida);
				if (serC.vida <= 0) {
					labelSerC.setVisible(false);
				}
			}

			if (serD.random(600) % 100 == 0) {
				labelSerD.setBounds(serD.moverX(serD.x, 10, 600), serD.y, 60, 40);
			} else if (serD.random(600) % 50 == 0) {
				labelSerD.setBounds(serD.x++, (serD.moverY(serD.y, 10, 600)), 60, 40);
			}

			Mundo.setLocation(0, 0);
			Mundo.setVisible(true);

			System.out.println("A " + serA.vida);
			System.out.println("B " + serB.vida);
			System.out.println("C " + serC.vida);

			Thread.sleep(1);
		}
	}
}